# This chart catches changes and then pushed to main branch
# Tests, Updates Dependency and Packages, then pushes to
# our parent repo that holds all Helx Charts Helm-Charts

name: Trigger-Helm-Charts
on:
  push:
    # branches:
    #   - main
    #   - master
    # # paths-ignore:
    # #   - .github/workflows/*
    # #   - .github/*

jobs:
  
  Get-Chart-Info:
    outputs:
      APPREPO: ${{ steps.chartInfo.outputs.APPREPO }}
      ACTOR: ${{ steps.chartInfo.outputs.ACTOR }}
      TOKEN: ${{ steps.chartInfo.outputs.TOKEN }}
    runs-on: ubuntu-latest
    steps:
      - name: chartInfo
        id: chartInfo
        run: |
          echo "APPREPO=${{ github.repository}}" >> GITHUB_OUTPUT
          echo "ACTOR=${{ github.actor }}" >> GITHUB_OUTPUT
          echo "TOKEN=${{ secrets.GH_TOKEN }}" >> GITHUB_OUTPUT
  Trigger-Helm-Charts:
    needs: Get-Chart-Info
    uses: pchachicho/renci-github-actions/.github/workflows/trigger-helm-charts.yml@main
    secrets:
      env_vars: |
        APPREPO=${{ needs.Get-Chart-Info.outputs.APPREPO }}
        ACTOR=${{ needs.Get-Chart-Info.outputs.ACTOR }}
        TOKEN=${{ needs.Get-Chart-Info.outputs.TOKEN }}
